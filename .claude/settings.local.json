{
  "permissions": {
    "allow": [
      "Bash(which gh && gh --version 2>/dev/null || echo \"not installed\")",
      "Bash(which brew && brew --version 2>/dev/null || echo \"homebrew not found\")",
      "WebSearch",
      "WebFetch(domain:expo.dev)",
      "WebFetch(domain:docs.expo.dev)",
      "WebFetch(domain:evanbacon.dev)",
      "WebFetch(domain:medium.com)",
      "WebFetch(domain:www.callstack.com)",
      "WebFetch(domain:www.peterarontoth.com)",
      "WebFetch(domain:thereactnativerewind.com)",
      "Bash(npx create-expo-app@latest . --template blank-typescript 2>&1)",
      "Bash(cp -r /Users/josh/projects/forged-scaffold/. /Users/josh/projects/forged/ && rm -rf /Users/josh/projects/forged-scaffold && ls /Users/josh/projects/forged/)",
      "Bash(npx expo upgrade 55 2>&1)",
      "Bash(npm install 2>&1 | tail -5)",
      "Bash(npm install @expo/cli --prefix /Users/josh/projects/forged 2>&1 | tail -5)",
      "Bash(./node_modules/.bin/expo --version 2>&1)",
      "Bash(npm install expo@beta --prefix /Users/josh/projects/forged 2>&1 | tail -10)",
      "Bash(npm view expo dist-tags 2>&1)",
      "Bash(npm install expo@next --prefix /Users/josh/projects/forged 2>&1 | tail -5)",
      "Bash(./node_modules/.bin/expo install react-native@0.79.0 react@19.0.0 2>&1 | tail -10)",
      "Bash(./node_modules/.bin/expo install expo-router expo-sqlite expo-haptics expo-notifications expo-dev-client expo-status-bar 2>&1 | tail -10)",
      "Bash(./node_modules/.bin/expo install react-native-reanimated react-native-worklets react-native-gesture-handler 2>&1 | tail -10)",
      "Bash(npm install react-native-reanimated react-native-worklets react-native-gesture-handler --prefix /Users/josh/projects/forged 2>&1 | tail -5)",
      "Bash(npm install react-native-reanimated react-native-worklets react-native-gesture-handler --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -8)",
      "Bash(npm install zustand drizzle-orm drizzle-kit react-native-purchases victory-native @shopify/react-native-skia --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -5)",
      "Bash(npm install expo-widgets @expo/ui --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -8)",
      "Bash(git init && cat > .gitignore << 'EOF'\nnode_modules/\n.expo/\ndist/\nnpm-debug.*\n*.jks\n*.p8\n*.p12\n*.key\n*.mobileprovision\n*.orig.*\nweb-build/\n.DS_Store\n*.env\ngoogle-service-account.json\nios/\nandroid/\nEOF\ngit add -A && git commit -m \"Initial scaffold: Expo SDK 55, expo-router, Drizzle, Reanimated 4, Zustand\")",
      "Bash(xcode-select -p && xcrun simctl list devices available --json | python3 -c \"import json,sys; devs=json.load\\(sys.stdin\\)['devices']; iphones=[\\(k,v\\) for k,vs in devs.items\\(\\) for v in vs if 'iPhone' in v['name'] and v['state']=='Booted']; print\\('Booted:', iphones[:3] if iphones else 'none'\\)\" 2>&1)",
      "Bash(xcode-select -p && xcrun simctl list devices available 2>&1 | grep -E \"iPhone.*Booted|iPhone 1[5-9]|iPhone 16\" | head -10)",
      "Bash(sudo xcode-select -s /Applications/Xcode.app/Contents/Developer 2>&1)",
      "Bash(xcode-select -p && xcrun simctl list devices available 2>&1 | grep -E \"iPhone\" | head -10)",
      "Bash(xcrun simctl list devices 2>&1 | head -30)",
      "Bash(xcrun simctl runtime list 2>&1)",
      "Bash(npx tsc --noEmit 2>&1)",
      "Bash(xcrun simctl list devices available 2>&1 | grep iPhone | head -10)",
      "Bash(npx expo run:ios --device \"iPhone 17 Pro\" 2>&1)",
      "Bash(rm -rf /Users/josh/projects/forged/ios && npm install react-native@0.83.2 react@19.0.0 --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -5)",
      "Bash(npm install react-native-screens react-native-safe-area-context --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -5)",
      "Bash(rm -rf /Users/josh/projects/forged/ios && npx expo run:ios --device \"iPhone 17 Pro\" 2>&1)",
      "Bash(npm install babel-preset-expo --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -5)",
      "Bash(pkill -f \"metro\" 2>/dev/null; pkill -f \"expo start\" 2>/dev/null; echo \"done\")",
      "Bash(lsof -ti :8081 | xargs kill -9 && echo \"done\")",
      "Bash(ls /Users/josh/projects/forged/node_modules/babel-preset-expo/package.json 2>&1 && node -e \"require\\('babel-preset-expo'\\)\" 2>&1)",
      "Bash(npm install expo-linking --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -3)",
      "Bash(npm install expo-constants expo-linking expo-asset expo-font expo-modules-core --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -3)",
      "Bash(npm install --prefix /Users/josh/projects/forged 2>&1 | grep -E \"peer dep|WARN|error\" | head -30)",
      "Bash(rm -rf /Users/josh/projects/forged/node_modules /Users/josh/projects/forged/package-lock.json && npm install --prefix /Users/josh/projects/forged 2>&1 | tail -5)",
      "Bash(npm install --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -5)",
      "Bash(npx expo install \\\\\n  expo-router \\\\\n  expo-sqlite \\\\\n  expo-dev-client \\\\\n  expo-haptics \\\\\n  expo-notifications \\\\\n  expo-status-bar \\\\\n  expo-linking \\\\\n  expo-constants \\\\\n  expo-font \\\\\n  expo-asset \\\\\n  babel-preset-expo \\\\\n  react-native-gesture-handler \\\\\n  react-native-reanimated \\\\\n  react-native-safe-area-context \\\\\n  react-native-screens 2>&1 | tail -15)",
      "Bash(npm install \\\\\n  drizzle-orm \\\\\n  zustand \\\\\n  react-native-reanimated \\\\\n  react-native-worklets \\\\\n  react-native-purchases \\\\\n  victory-native \\\\\n  @shopify/react-native-skia \\\\\n  @expo/ui \\\\\n  expo-widgets \\\\\n  --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -5)",
      "Bash(npm install react-dom@19.0.0 --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -3)",
      "Bash(git -C /Users/josh/projects/forged status --short | head -20)",
      "Bash(git -C /Users/josh/projects/forged status && git -C /Users/josh/projects/forged log --oneline)",
      "Bash(git remote add origin https://github.com/jgormley/forged.git 2>&1 || git remote set-url origin https://github.com/jgormley/forged.git)",
      "Bash(git -C /Users/josh/projects/forged add app.json app/\\\\\\(tabs\\\\\\)/index.tsx package.json package-lock.json tsconfig.json .gitignore babel.config.js drizzle.config.ts eas.json PROGRESS.md src/ app/ widgets/ index.ts 2>&1)",
      "Bash(git -C /Users/josh/projects/forged status --short)",
      "Bash(git -C /Users/josh/projects/forged commit -m \"$\\(cat <<'EOF'\nScaffold complete: SDK 55, all deps at correct versions, app boots on simulator\n\n- Fix all package versions to SDK 55 \\(expo install resolved them correctly\\)\n- Remove @expo/cli from direct deps, move drizzle-kit to devDependencies\n- Add babel-preset-expo, react-dom, expo-linking, react-native-screens,\n  react-native-safe-area-context as required runtime deps\n- Configure app.json: bundle ID, CNG plugins, remove expo-build-properties\n- Fix splash asset reference \\(splash-icon.png\\)\n- Add @/* -> src/* path alias in tsconfig\n- Stub Today screen so app renders on launch\n- Add PROGRESS.md with completed work and full phase checklist\n\nNext: streak.ts pure TypeScript engine + unit tests\n\nCo-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>\nEOF\n\\)\")",
      "Bash(git -C /Users/josh/projects/forged push -u origin main 2>&1)",
      "Bash(gh auth setup-git 2>&1 && git -C /Users/josh/projects/forged push -u origin main 2>&1)",
      "Bash(npm install --save-dev jest jest-expo @types/jest --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -3)",
      "Bash(npm test -- --testPathPattern=streak 2>&1)",
      "Bash(npm test -- --testPathPatterns=streak 2>&1)",
      "Bash(npm install --save-dev ts-jest --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -3)",
      "Bash(npm test 2>&1)",
      "Bash(git add src/utils/streak.ts src/utils/streak.test.ts package.json package-lock.json && git commit -m \"$\\(cat <<'EOF'\nAdd streak engine with 38 passing unit tests\n\nPure TypeScript implementation of all 6 streak functions:\n- calculateCurrentStreak \\(daily, daysOfWeek, xPerWeek\\)\n- calculateLongestStreak\n- isStreakAtRisk\n- getCompletionRate\n- getScheduledDaysInWindow\n- isScheduledDay\n\nTests cover all edge cases: gap handling, pending today, leap year,\nmidnight boundary, non-scheduled days, xPerWeek weekly goal tracking,\nmultiple broken streaks, and completion rate windowing.\n\nConfigure ts-jest for pure unit tests \\(node env, no Expo runtime\\).\n\nCo-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>\nEOF\n\\)\" && git push)",
      "Bash(npx drizzle-kit generate 2>&1)",
      "Bash(npx expo install expo-crypto 2>&1 | tail -3)",
      "Bash(npm install --prefix /Users/josh/projects/forged --legacy-peer-deps 2>&1 | tail -3 && npx tsc --noEmit 2>&1)",
      "Bash(git add -A && git commit -m \"$\\(cat <<'EOF'\nAdd DB migrations, Zustand stores, metro SQL config\n\nDB migrations:\n- Run drizzle-kit generate → 0000_white_black_knight.sql\n- metro.config.js: add .sql to sourceExts for drizzle migration imports\n- app/_layout.tsx: useMigrations hook gates render behind migration success\n\nStores:\n- habitsStore: full CRUD \\(load, add, update, remove, archive\\)\n  FrequencyConfig serialized/deserialized as JSON column\n- completionsStore: loadToday, loadForHabit, toggle \\(add/remove today\\)\n- uiStore: milestone modal, paywall, global loading, toast\n  getMilestoneTier\\(\\) helper for 7/30/100 day celebrations\n\nexpo-crypto added for randomUUID\\(\\)\nTypeScript clean, 38 tests passing\n\nCo-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>\nEOF\n\\)\" && git push)",
      "Bash(git add -A && git commit -m \"$\\(cat <<'EOF'\nAdd useHabitStreak, useCompletionRate, usePremium hooks\n\n- useHabitStreak: useLiveQuery → streak functions, returns currentStreak,\n  longestStreak, isAtRisk, completionDates. Reactive to DB changes.\n- useCompletionRate: useLiveQuery → getCompletionRate, returns rate \\(0-1\\)\n  and ratePercent \\(0-100\\) for 7/30/90 day windows\n- usePremium: RevenueCat wrapper with graceful no-op when API keys not set.\n  Exposes purchase\\(\\), restore\\(\\), refresh\\(\\), canAddHabit\\(count\\).\n  FREE_HABIT_LIMIT = 3 enforced via canAddHabit.\n\nConsolidate FrequencyConfig: schema.ts now re-exports from streak.ts\n\\(single source of truth\\).\n\nTypeScript clean, 38 tests passing.\n\nCo-Authored-By: Claude Sonnet 4.6 <noreply@anthropic.com>\nEOF\n\\)\" && git push)"
    ]
  }
}
